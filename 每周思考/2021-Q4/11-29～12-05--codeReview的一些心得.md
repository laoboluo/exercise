<!--
 * @Date: 2021-12-06 18:00:41
 * @LastEditors: zhaoweixiang
 * @LastEditTime: 2021-12-06 18:00:42
 * @FilePath: /exercise/每周思考/2021-Q4/11-29～12-05--codeReview的一些心得.md
-->
## 【起因】

1、哎 兄弟帮忙“a”个代码，而不是帮我review下代码，codeReview规范有没有严格执行，考验审查者的责任心

2、review中审查者提出问题，被审查者说都测完马上上线了，先不改了就这样吧，反正不影响使用，后面我在优化

3、彬哥在改测试bug，发现代码规范问题，提出给组内同学codeReview评审

4、当多人维护的代码库整体健康度不高的时候，想要整改很痛苦



## 【分析】

### 如何保证业务需求迭代中，代码库的整体健康状况

  a：代码格式规范，属于高频场景，靠git-hook和husky等工具lint，sonar等把代码的圈复杂度约束起来，简化开发的工作任务

  b：页面性能检查走工具监控

  c：最佳实践做模版（比如vscode 的 snippets）

  d：复杂业务逻辑设计画uml

  e：整体代码编写逻辑，代码是否鲁棒就需要熟悉的人codeReview



整体的业务逻辑、代码鲁棒性，有没有可能出错影响代码库健康状态，是需要人工codeReview的



### codeReview好处

1、互相熟悉代码，了解组员细节和能力

2、统一代码规范，形成一套约定（最佳实践），彼此相互CR，帮助大家在意识养成习惯，彼此相互学习代码好的地方，指出不好的地方，落地约定

3、保证代码的质量，系统的稳定性，代码库的健康



### 为什么之前写过codeReview的标准流程，还会存在上述问题？

一言蔽之：责任心驱动，需要自上向下、整年度强控跟踪



1、谁去定义什么样的代码是需要改正的，有些这么写也可以，那么写的也可以的不必须太较真的心态，确少权威性

2、CR 背后是审查的责任心和软硬手段，自驱的中前期依然需要自上而下养成，即便养成后也需要自上向下跟踪，只要管理上松懈有几个月，全团队的 CR 质量就会明显下降，因为二八定律，一个非明星团队中大部分工程师并不具备高度的自驱动



### 怎么做codeReivew

1、约定大于配置，遵循代码审查者指南和代码开发者指南

2、避免高频，用最轻量最坚决的方式跑，CR 只是手段，不是结果，目的是帮助团队童鞋从没啥责任心走向到高度自驱，从而从源头上提升代码质量

3、管理上任何一个问题都是要组合拳解决，配合奖惩制度，这些事情背后就是一颗保姆心，用心培养任何一个成员，如果无法成长起来，对于付出的成本，或因为代码库不健康导致流失任何一个人的招聘成本，算起来都不划算



## 【实践】

### 组合拳之一

1、简单业务需求，通过平时代码审查评论来解决

2、大型项目，审阅者和开发者可以进行面对面的会议，让众多的审阅者给开发者提出建议，帮助技术成长，养成良好规范习惯
